<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PERFIL ACTUALIZADO | √âlite Drive</title>
    <style>
        :root { --red: #ff1744; --gold: #c5a059; --dark: #050505; --card: #111; }
        body { background: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; }

        /* Sidebar */
        .sidebar { width: 260px; background: #000; height: 100vh; position: fixed; padding: 20px; border-right: 1px solid #222; }
        .nav-btn { width: 100%; padding: 15px; background: none; border: none; color: #666; text-align: left; border-radius: 8px; margin-bottom: 5px; cursor: pointer; }
        .nav-btn.active { color: white; background: #1a1a1a; border-left: 4px solid var(--gold); }

        .content { margin-left: 260px; padding: 40px; width: 100%; box-sizing: border-box; }
        
        /* Contenedor Principal */
        .profile-card { 
            display: flex; gap: 40px; background: var(--card); padding: 40px; 
            border-radius: 20px; border: 2px solid #333; /* Borde m√°s grueso para notar el cambio */
        }

        /* FOTO DE PERFIL CON BOT√ìN FUNCIONAL */
        .avatar-column { flex: 0 0 200px; text-align: center; }
        .avatar-wrapper { position: relative; width: 160px; height: 160px; margin: 0 auto; }
        .avatar-img { 
            width: 100%; height: 100%; border-radius: 25px; object-fit: cover; 
            border: 3px solid var(--gold); background: #000;
        }
        .btn-upload { 
            position: absolute; bottom: -5px; right: -5px; background: var(--gold); 
            color: black; width: 42px; height: 42px; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; 
            cursor: pointer; border: 3px solid var(--card); font-size: 20px;
        }
        #fileInput { display: none; }

        /* FORMULARIO CON NUEVOS CAMPOS */
        .form-container { flex: 1; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full { grid-column: span 2; }
        
        label { color: var(--gold); font-size: 11px; text-transform: uppercase; font-weight: bold; display: block; margin-bottom: 8px; }
        input { 
            width: 100%; padding: 14px; background: #000; border: 1px solid #444; 
            color: white; border-radius: 8px; box-sizing: border-box; font-size: 14px;
        }
        input:focus { border-color: var(--gold); outline: none; }

        /* CONTADOR DE SEGURIDAD (72 CARACTERES) */
        .security-note { font-size: 10px; color: #777; margin-top: 5px; }
        #char-counter { font-weight: bold; color: var(--red); }

        .btn-save { 
            grid-column: span 2; background: var(--gold); color: black; 
            padding: 16px; border: none; border-radius: 10px; font-weight: bold; 
            cursor: pointer; font-size: 15px; transition: 0.3s; margin-top: 10px;
        }
        .btn-save:hover { background: #d4af37; transform: translateY(-2px); }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2 style="color: var(--gold); text-align: center;">√âLITE DRIVE</h2>
        <button class="nav-btn active">üë§ Mi Perfil</button>
        <button class="nav-btn">üìä Mi Progreso</button>
        <button class="nav-btn">üöó Mis Clases</button>
        <a href="index.html" style="color: var(--red); text-decoration: none; display: block; padding: 15px; font-weight: bold; margin-top: 20px;">CERRAR SESI√ìN</a>
    </div>

    <div class="content">
        <h1 style="color: white;">Configuraci√≥n de <span style="color: var(--gold);">Perfil Estudiante</span></h1>
        
        <div class="profile-card">
            <div class="avatar-column">
                <div class="avatar-wrapper">
                    <img src="https://via.placeholder.com/160/111/C5A059?text=FOTO" id="pfp" class="avatar-img">
                    <label for="fileInput" class="btn-upload">üì∑</label>
                    <input type="file" id="fileInput" accept="image/*" onchange="subirFoto()">
                </div>
                <p style="font-size: 11px; color: #555; margin-top: 15px;">Subir foto real para tu carnet digital</p>
            </div>

            <div class="form-container">
                <div class="full">
                    <label>Nombre Completo</label>
                    <input type="text" id="nom" placeholder="Escribe tu nombre">
                </div>

                <div class="full">
                    <label>Correo Electr√≥nico (CAMPO NUEVO)</label>
                    <input type="email" id="mail" placeholder="usuario@correo.com">
                </div>

                <div>
                    <label>Tel√©fono / WhatsApp</label>
                    <input type="text" id="tel" placeholder="+57...">
                </div>

                <div>
                    <label>ID de Alumno</label>
                    <input type="text" value="ED-2026-X" disabled style="opacity: 0.5;">
                </div>

                <div>
                    <label>Nueva Contrase√±a (Alta Seguridad)</label>
                    <input type="password" id="p1" oninput="contar()" placeholder="72 caracteres m√≠nimos">
                    <div class="security-note">Progreso: <span id="char-counter">0</span> / 72 caracteres</div>
                </div>

                <div>
                    <label>Repetir Contrase√±a</label>
                    <input type="password" id="p2" placeholder="Confirma tu clave">
                </div>

                <button class="btn-save" onclick="validar()">ACTUALIZAR PERFIL √âLITE</button>
            </div>
        </div>
    </div>

    <script>
        // L√≥gica de Foto
        function subirFoto() {
            const preview = document.getElementById('pfp');
            const file = document.getElementById('fileInput').files[0];
            const reader = new FileReader();
            reader.onloadend = () => { preview.src = reader.result; }
            if (file) reader.readAsDataURL(file);
        }

        // L√≥gica de Contador de Contrase√±a
        function contar() {
            const largo = document.getElementById('p1').value.length;
            const text = document.getElementById('char-counter');
            text.innerText = largo;
            text.style.color = largo >= 72 ? "#4caf50" : "#ff1744";
        }

        // Validaci√≥n Estricta
        function validar() {
            const mail = document.getElementById('mail').value;
            const pass1 = document.getElementById('p1').value;
            const pass2 = document.getElementById('p2').value;

            // Requisitos de contrase√±a
            const tieneMayus = /[A-Z]/.test(pass1);
            const tieneNum = /[0-9]/.test(pass1);
            const tieneSpecial = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(pass1);

            if (pass1.length > 0) {
                if (pass1 !== pass2) return alert("‚ùå Las contrase√±as no coinciden.");
                if (pass1.length < 72) return alert("‚ùå Error: La contrase√±a debe tener al menos 72 caracteres.");
                if (!tieneMayus || !tieneNum || !tieneSpecial) {
                    return alert("‚ùå Error: Debe incluir May√∫scula, N√∫mero y Car√°cter Especial.");
                }

                // Simulaci√≥n de c√≥digo de verificaci√≥n
                const code = prompt(`Se envi√≥ un c√≥digo a ${mail}. Ingr√©salo para confirmar el cambio de seguridad:`);
                if (code && code.length === 6) {
                    alert("‚úÖ Cambios guardados con √©xito.");
                } else {
                    alert("‚ùå C√≥digo incorrecto.");
                }
            } else {
                alert("‚úÖ Datos actualizados (sin cambio de clave).");
            }
        }
    </script>
</body>
</html>